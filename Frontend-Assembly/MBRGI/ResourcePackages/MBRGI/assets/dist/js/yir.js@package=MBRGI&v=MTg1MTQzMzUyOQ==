$(document).ready(function(){var t,a="en"!==$("html").attr("lang"),e=checkIfMobile(),o=0,n=1,s=6e3,l=!0,r=!1,c=0;e&&f();var d=[];function p(){$(".timeview_slide_year .slide").each(function(){var e=$(".years_in_review_slide_text_title",$(this)).text();o++,$(".timeview .timeline").append("<div class='point' index='"+o+"'><div class='title'>"+e+"</div></div>"),$(".timeview .timeline").append("<div class='line' index='"+o+"'><div class='inner'></div></div>"),$(this).attr({index:o}),$(this).css({"z-index":parseInt(9-o)})}),_(),v(1)}function _(){screen_width=Math.min($(window).width(),1920);var t=screen_width-$(".timeline").position().left;a&&(t=screen_width-parseInt($(".timeline").css("right")));var n=t/o;i=0,$(".timeline .line").each(function(){if(i++,point=$(".point[index|="+i+"]"),a?point.css({right:(i-1)*n}):point.css({left:(i-1)*n}),line=$(".line[index|="+i+"]"),a)if(992<=screen_width){var e=parseInt(point.css("right"));line.css({right:e+10,width:n-10})}else line.css({right:0,width:t-50});else 992<=screen_width?line.css({left:point.position().left+10,width:n-10}):line.css({left:0,width:t-50})})}function v(e){for(n=e,$(".inner").clearQueue().stop(),$(".inner").css({width:0}),$(".point").removeClass("active"),$(".point").removeClass("current"),$(".point .title").css({opacity:0}),i=1;i<n;i++)line=$(".line[index|="+i+"]"),inner=$(".inner",line),point=$(".point[index|="+i+"]"),inner.css({width:"100%"}),point.addClass("active");$(".point[index|="+n+"]").addClass("current"),r||m()}function m(){if(l){var e=$(".timeview .slide[index|="+n+"]");$(".timeview .slide .image .inner_image").css({opacity:"0"}),$(".timeview .slide .years_in_review_slide_text").css({opacity:"0"}),$(".timeview .slide").hide(),e.show(),$(".timeview .slide[index|="+n+"]").addClass("active"),point=$(".point[index|="+n+"]"),line=$(".line[index|="+n+"]"),inner=$(".inner",line),point.addClass("active"),$(".title",point).animate({opacity:1}),t=setTimeout(function(){$(".title",point).animate({opacity:0})},s/2),$(".line").css({"z-index":1}),line.css({"z-index":2}),inner.animate({width:"100%"},s,"linear",function(){!function(){r=!1,o<++n&&(n=1);v(n)}()})}}function u(e){if(e){l=!0,$(".timeline-play").toggleClass("active",l),$(".timeline-pause").toggleClass("active",!l);var i=$(".timeview .slide[index|="+n+"]");$(".image .inner_image",i).css({opacity:"1"}),$(".years_in_review_slide_text",i).css({opacity:"1"}),m()}else{r=!(l=!1),$(".timeline-play").toggleClass("active",l),$(".timeline-pause").toggleClass("active",!l),(i=$(".timeview .slide[index|="+n+"]")).removeClass("active"),$(".image .inner_image",i).css({opacity:"1"}),$(".years_in_review_slide_text",i).css({opacity:"1"}),v(n)}}function f(){$(".inner_image",".timeview").each(function(){e&&1<=$(this).attr("data-image-mobile").length?$(this).css("background-image","url("+$(this).attr("data-image-mobile")+")"):$(this).css("background-image","url("+$(this).attr("data-image-desktop")+")")})}$(".timeview_slide_year").each(function(e){d[e]=$(this).clone()}),$(".timeview_slide_year").each(function(e){e!=c&&$(this).remove()}),$(".year_navigation_item").click(function(){!function(e){c=e,$(".year_navigation_item").each(function(e){e==c?$(this).toggleClass("active",!0):$(this).toggleClass("active",!1)}),$(".timeview_slide_wrapper").empty(),$(".timeview_slide_wrapper").append(d[c]),$(".timeline").find(".inner").each(function(){$(this).stop().clearQueue().finish()}),$(".timeline").empty(),o=0,n=1,clearTimeout(t),p(),$(".timeline-play").click()}($(".year_navigation_item").index(this))}),p(),$(".timeline-pause").click(function(){u(!1)}),$(".timeline-play").click(function(){u(!0)}),$(".timeline").on("click",".point",function(){l=!(r=!1),index=$(this).attr("index"),v(index)}),$(window).resize(function(){_(),e!=checkIfMobile()&&(e=!e,f())});var g=!1,y=document.getElementById("pdfViewer"),w=(y.contentWindow.PDFViewerApplication,JSON.parse(document.getElementById("data").innerHTML));function h(e){if($(".years_in_review_pdf_overlay").toggleClass("open",e),e?(g=l,u(!1)):g&&u(!0),/iphone|ipad|ipod/i.test(navigator.userAgent.toLowerCase())){var i=document.querySelector(".years_in_review_pdf_overlay");e?bodyScrollLock.disableBodyScroll(i):bodyScrollLock.enableBodyScroll(i)}else if(e)storeBodyScroll(),$("body").toggleClass("modal-open",!0);else{var t=parseInt($("body").css("top"),10);$("body").toggleClass("modal-open",!1),t&&t<0&&($("html").scrollTop(-t),$("body").css({top:0}))}}function x(e){y.contentWindow.PDFViewerApplication.page=e}$(document).on("keyup",function(e){27==e.keyCode&&h(!1)}),$(document).on("click",".pdf_link",function(){var e=$(this).attr("data-url"),i=parseInt($(this).attr("data-page"),10);$(this).attr("data-title");$.isNumeric(i)||(i=1),$(".years_in_review_pdf_overlay_download_pdf_link").attr("href",e),y.contentWindow.PDFViewerApplication.open(e).then(function(){}),document.getElementById("pdfViewer").contentWindow.addEventListener("pagesloaded",function(e){setTimeout(function(){x(i)},100)},!0);for(var t="",n=0,a=w.length;n<a;n++)w[n].PDF.PdfUrl==e&&(t=w[n].PDF.PdfSectionList);if($(".years_in_review_pdf_overlay_navigation ul").empty(),t){var o=$(".years_in_review_pdf_overlay_navigation ul");for(n=0,a=t.length;n<a;n++){var s=$("<li/>").appendTo(o);if(t[n].PageNumber==i)$("<button/>",{class:"years_in_review_pdf_overlay_navigation_button active","data-page":t[n].PageNumber,text:t[n].Title}).appendTo(s);else $("<button/>",{class:"years_in_review_pdf_overlay_navigation_button","data-page":t[n].PageNumber,text:t[n].Title}).appendTo(s)}}h(!0)}),$(".years_in_review_pdf_overlay_close_button").click(function(){h(!1)}),$(".years_in_review_pdf_overlay").on("click",".years_in_review_pdf_overlay_navigation_button",function(e){$(e.target).toggleClass("active",!0),$(".years_in_review_pdf_overlay_navigation_button").not(e.target).each(function(e){$(this).toggleClass("active",!1)});var i=$(this).attr("data-page");$.isNumeric(i)&&x(parseInt(i))})});